# ğŸ“ Changelog

All notable changes to this project will be documented here.  

---

## [0.08] â€“ 2025-06-17  
### âœ… Focus: Build Stability, Compression, Redundancy Cleanup

### âš™ï¸ Core Improvements
- ğŸ“¦ **EXE Compression Enabled:** Integrated UPX compression using external UPX path to reduce executable size.

### ğŸ”§ Code Cleanup
- ğŸ§¹ **Removed Unused Imports:** Removed `Image` from `PIL` as it was unused.
- ğŸ§¼ **Simplified Version Print Logic:** Eliminated double "Location Version" display.
- ğŸª¶ **Removed Unused Variables:** Removed `flat` text from OCR parsing as it was no longer used.

---

## ğŸ“¦ [0.07] â€“ 2025-06-17  
**âœ… Focus: CPU Performance, Stability, Logging**

### âš™ï¸ Core Improvements
- ğŸ§  **Lazy EasyOCR Initialization**  
  `easyocr.Reader` is now only created after game launch is detected, improving startup time and reducing CPU strain.

- ğŸ–¤ **Grayscale Capture**  
  Screen captures are now converted to grayscale before OCR to reduce processing time.

- â±ï¸ **Accurate Interval Timing**  
  `CAPTURE_INTERVAL` now compensates for OCR+processing duration for consistent pacing.

- ğŸ§¼ **Numpy Removed**  
  Removed the `np.array` conversion from image capture to reduce memory usage and boost performance.

---

### ğŸ› ï¸ Stability & Crash Prevention
- ğŸš« **Reader Safety Check**  
  If `easyocr.Reader` isnâ€™t initialized, `get_location_text()` will safely return `"Unknown"`.

- ğŸ›‘ **No-OCR Short-Circuit**  
  If OCR returns no results, the script skips parsing and logs `NO_OCR_RESULTS`.

---

### ğŸ“ Logging & Debugging
- âœ‚ï¸ **Trim Debug Logs**  
  `unmatched_locations.log` is trimmed to the last 100 lines to prevent bloat.

- ğŸ§¹ **Stripped Empty Lines**  
  Empty/whitespace lines are now excluded from log retention.

- âš ï¸ **Noise Detection Logging**  
  Known main menu entries are logged as `"INVALID_LOCATION_ID"` for clarity.

---

## ğŸ“¦ [0.06] â€“ 2025-06-16

### ğŸ†• Added
- ğŸ“¢ Main script version check using `drp_version.txt` from GitHub.
- ğŸ”” Notification for users when a newer version is available.

### â™»ï¸ Changed
- ğŸ Renamed script to `starcitizen_drp.py`.
- ğŸ§½ Cleaned version display: removed redundant â€œLocation Versionâ€ label.

### ğŸ› Fixed
- ğŸ”¢ Proper version comparison logic to prevent false updates.

---

## ğŸ“¦ [0.05] â€“ 2025-06-15

### ğŸ†• Added
- âŒ Removed `â€œLZâ€` fallback â€” now only uses `"Current player location"` block.
- ğŸ—‚ï¸ Centralized data into `%APPDATA%\StarCitizenPresence\Locations\`.
- ğŸ”„ GitHub auto-update for `location_aliases.txt` & `loc_version.txt`.
- â³ Waiting loop displays animated dots, clears RPC on game exit.
- ğŸ§  Refined OCR logic and fuzzy-matching.

### â™»ï¸ Changed
- ğŸ”º Script version bumped to **0.05**.
- ğŸ¯ Fuzzy matching tuned: cutoff 0.7, top 3 matches.
- ğŸŒ Shows local vs remote alias version on launch.

### ğŸ› Fixed
- ğŸ§¼ Removed duplicate â€œaliases up to dateâ€ message.
- ğŸ§¹ Consolidated main menu noise list handling.

---

## ğŸ“¦ [0.04] â€“ 2025-06-15

### ğŸ†• Added
- ğŸ•¹ï¸ Game detection via `psutil`, pauses/resumes RPC automatically.
- ğŸ’¬ â€œWaitingâ€¦â€ animation with dot updates.
- ğŸ›‘ Proper RPC clearing when game exits.
- ğŸ“ Organized AppData structure for locations and logs.
- ğŸ“¸ Debug screenshots stored under `Debugging` folder.

### â™»ï¸ Changed
- ğŸ“‚ Moved alias files into AppData locations.
- ğŸ§¼ Cleaned console output, removed duplicate messages.
- ğŸ§½ Clears console line on game detection.

### ğŸ› Fixed
- âœ… Ensures clean transition from waiting state to active presence.
- ğŸ” Prevents multiple â€œStar Citizen detected!â€ prints.
